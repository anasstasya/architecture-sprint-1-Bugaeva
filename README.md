# 1. Разделение на микрофронтенды

Для разделения веб-приложения Mesto на микрофронтенды было принято 
решение использовать подход Module Federation. Т.к работать с микрофронтендами 
мне не приходилось, а в последней теме подродно разбирался пример на основе WMF,
то было решено использовать именно его, ведь теперь "наша команда" в моем лице 
имеет уже какой-никакой опыт работы с этим плагином.

# 2. Описание архитектуры

С помощью команды **npx create-mf-app** было создано 4 микрофронта:
* auth_mf
* card_mf
* user_profile_mf
* host

### auth_mf

Микрофронтенд отвечает за регистрацию новых пользователей и систему авторизации. Содержит модули Login.js и Register.js, а так же утилитные функции для взаимодействия их с бэкендом.

В дальнейшем в этом подпроекте могут появиться модули капчи, авторизации по Yandex/VK/Google, страницы с сообщениями об ошибках логина/регистрации и тд.

### card_mf

Этот микрофронтенд инкапсулирует компонент карточки "места" и popup добавления нового "места". Так же тут содержатся основные функции для работы с api: запрос на получение карточек, добавление/удаление карточки, постановка/снятие лайка.

На данный момент компонент для формирования списка карточек находится в главном микрофронтенде (Main.js). В дальнейшем компонент построения списка карточек тоже можно перенести в card_mf, чтобы уменьшить связанность. Контроль за этим списком позволит добавлять новые функции, такие как постраничный вывод, поиск/фильтрация, добавление тэгов, без потенциально негативного влияния на host-приложение.

### user_profile_mf

В этот микрофронтенд перенесены компоненты для изменения аватара и профиля пользователя. Верстка по отображению данных пользователя находится в основном модуле в компоненте Main.js. В дальнейшем ее тоже можно вынести в user_profile_mf, чтобы можно было развивать независимо от основного модуля.

### host

Основной микрофронт, который включает в себя компоненты дочерних подмодулей. После вынесения больше части кода в этом проекте осталось мало логики. это связано с тем, что изначально функций было немного. При необходимости развития основная бизнес-логика должна концентрироваться именно здесь. 

Для разделения проекта на микрофронтенды был применен анти-паттерн "Большой взрыв", когда все приложение было приведено в нерабочее состояние. В реальности разделение происходило бы по-этапно.

# 3. Декомпозиция микросервисов (3-е задание)

https://drive.google.com/file/d/16I7Y7MtnUSiKILr9_b0xQahBthiVBrmb/view?usp=sharing

Схема была полностью перерисована, поэтому красные cтрелки и блоки на ней отсутствуют

### Описание взаимодействия

1. Сервис авторизации. Отвечает за процесс регистрации и авторизации пользователей. В ответ выдает токен для взаимодействия с другими сервисами, например, оркестратором или сервисом товаров и услуг. 
2. Сервис клиентов. Хранит данные о клиентах. Взаимодействует с оркестартором и сервисом авторизации.  Доступен только для межсервисного взаимодействия.
3. Сервис товаров и услуг. Хранит данные и товарах и услугах пользователей. Осуществляет поиск по ним и предоставляет инструменты для их редактирования.
4. Сервис нотификаций. Скрывает детали реализации и взаимодействия с нотификационным шлюзом, которые уже отправляет сообщения напрямую клиенту.
5. Оркестратор. Регулирует взаимодействие между клиентом и сервисами и сервисами между собой. Взаимодействует с транзакционным сервисом. Хранит данные о всех заказах, заявках и аукционах. 
6. Транзакционный сервис. Работает с оркестратором и платежным шлюзом. Хранит данные о всех транзакциях и их статусах.